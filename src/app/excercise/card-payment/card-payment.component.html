<div class="container">
  <div class="row">
      <div class="cartpay col-12 mt-5 mb-5">
        <h2 class="text-center">Cart Payment</h2>
        <form [formGroup]="cartpaymentForm" class="mt-4" (ngSubmit)="cartpaymentMethod()">
          <!-- 1 -->
          <div class="form-group p-4">
            <h3 class="mb-4">Step 1: Your Details</h3>
            <div class="col-lg-12">
                  <div class="form-group row p-2">
                    <label for="flname" class="col-sm-2 col-form-label col-form-label-lg">Name</label>
                    <div class="col-sm-10">
                    <input type="text" class="form-control form-control-lg" placeholder="Enter Firstname & Lastname" name="flname" formControlName="flname">
                    <div *ngIf="cart.flname.errors && isValidFormSubmitted != null && isValidFormSubmitted" [ngClass] = "'error'">
                      <div *ngIf="cart.flname.errors.required"><div>Name is Required</div></div>
                      <div *ngIf="cart.flname.errors.minlength"><div>Name at least must be 15 characters.</div></div>
                    </div>
                    </div>
                  </div>
                  <div class="form-group row p-2">
                    <label for="email" class="col-sm-2 col-form-label col-form-label-lg">Email</label>
                    <div class="col-sm-10">
                    <input type="text" class="form-control form-control-lg" placeholder="example@domain.com" name="email" formControlName="email">
                    <div *ngIf="cart.email.errors && isValidFormSubmitted != null && isValidFormSubmitted" [ngClass] = "'error'">
                      <div *ngIf="cart.email.errors.required"><div>Email is Required</div></div>
                      <div *ngIf="cart.email.errors.email"><div>Email must be a valid email address.</div></div>
                      <div *ngIf="cart.email.errors?.cnfemail"><div>{{cart.cnfemail.value}}Email & Confirm Email is not matched.</div></div>
                    </div>
                    </div>
                  </div>
                  <div class="form-group row p-2">
                    <label for="cnfemail" class="col-sm-2 col-form-label col-form-label-lg">Confirm Email</label>
                    <div class="col-sm-10">
                    <input type="text" class="form-control form-control-lg" placeholder="example@domain.com" name="cnfemail" formControlName="cnfemail">
                    <div *ngIf="cart.cnfemail.errors && isValidFormSubmitted != null && isValidFormSubmitted" [ngClass] = "'error'">
                      <div *ngIf="cart.cnfemail.errors.required"><div>Confirm Email is Required</div></div>
                      <div *ngIf="cart.cnfemail.errors.email"><div>Confirm Email must be a valid email address.</div></div>
                      <div *ngIf="cart.cnfemail.value == cart.email.value"><div>Confirm Email & Email is not matched.</div></div>
                    </div>
                    </div>
                  </div>
                  <div class="form-group row p-2">
                    <label for="phone" class="col-sm-2 col-form-label col-form-label-lg">Phone</label>
                    <div class="col-sm-10">
                    <input type="text" class="form-control form-control-lg" placeholder="Ex. +914959546546" name="phone" formControlName="phone">
                    <div *ngIf="cart.phone.errors && isValidFormSubmitted != null && isValidFormSubmitted" [ngClass] = "'error'">
                      <div *ngIf="cart.phone.errors.required"><div>Phone number is Required</div></div>
                      <div *ngIf="cart.phone.errors.pattern"><div>Phone number should be a number</div></div>
                      <div *ngIf="cart.phone.errors.minlength"><div>The max length is 14.</div></div>
                    </div>
                    </div>
                  </div>
              </div>
            </div>
        <!-- 1 -->
          <!-- 2 -->
          <div class="form-group p-4" >
            <h3 class="mb-4">Step 2: Delivery Address</h3>
            <div class="col-lg-12" formGroupName="addresses">
                  <div class="form-group row p-2">
                    <label for="address" class="col-sm-2 col-form-label col-form-label-lg">Address</label>
                    <div class="col-sm-10">
                    <textarea class="form-control form-control-lg" placeholder="Enter your address" name="address" formControlName="address">
                      </textarea>
                     <div *ngIf="addresses.address.errors && isValidFormSubmitted != null && isValidFormSubmitted" [ngClass] = "'error'">
                        <div *ngIf="addresses.address.errors.required"><div>Address is Required</div></div>
                        <div *ngIf="addresses.address.errors.maxlength"><div>Address must not exceeded over 250 characters.</div></div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group row p-2">
                    <label for="postcode" class="col-sm-2 col-form-label col-form-label-lg">Postcode</label>
                    <div class="col-sm-10">
                    <input type="text" class="form-control form-control-lg" placeholder="Enter Postcode" name="postcode" formControlName="postcode">
                     <div *ngIf="addresses.postcode.errors && isValidFormSubmitted != null && isValidFormSubmitted" [ngClass] = "'error'">
                      <div *ngIf="addresses.postcode.errors.required"><div>PostCode is Required</div></div>
                      <div *ngIf="addresses.postcode.errors.minlength"><div>PostCode should be 6 characters length.</div></div>
                    </div>
                  </div>
                  </div>
                  <div class="form-group row p-2">
                    <label for="country" class="col-sm-2 col-form-label col-form-label-lg">Country</label>
                    <div class="col-sm-10">
                    <input type="text" class="form-control form-control-lg" placeholder="Enter Country" name="country" formControlName="country">
                     <div *ngIf="addresses.country.errors && isValidFormSubmitted != null && isValidFormSubmitted" [ngClass] = "'error'">
                      <div *ngIf="addresses.country.errors.required"><div>Country is Required</div></div>
                    </div>
                  </div>
                  </div>
              </div>
            </div>
        <!-- 2 -->
          <!-- 3 -->
          <div class="form-group p-4">
            <h3 class="mb-4">Step 3: Card details</h3>
            <div class="col-lg-12">
                  <div class="form-group row p-2">
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="cardType" formControlName="cardType" id="VISA" value="VISA">
                      <label class="form-check-label" for="VISA">VISA</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="cardType" formControlName="cardType" id="AmEx" value="AmEx">
                      <label class="form-check-label" for="AmEx">AmEx</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="radio" name="cardType" formControlName="cardType" id="Mastercard" value="Mastercard">
                      <label class="form-check-label" for="Mastercard">Mastercard</label>
                    </div>
                    <div *ngIf="cart.cardType.errors && isValidFormSubmitted != null && isValidFormSubmitted" [ngClass] = "'error'">
                      <div *ngIf="cart.cardType.errors.required"><div>CardType is Required</div></div>
                    </div>
                  </div>
                  <div class="form-group row p-2">
                    <label for="cardnum" class="col-sm-2 col-form-label col-form-label-lg">Card number</label>
                    <div class="col-sm-10">
                    <input type="text" class="form-control form-control-lg" placeholder="Enter card number" name="cardnum" formControlName="cardnum">
                    <div *ngIf="cart.cardnum.errors && isValidFormSubmitted != null && isValidFormSubmitted" [ngClass] = "'error'">
                      <div *ngIf="cart.cardnum.errors.required"><div>CardNumber is Required</div></div>
                      <div *ngIf="cart.cardnum.errors.minlength"><div>CardNumber should be 16 characters length and Max 19 characters length.</div></div>
                      <div *ngIf="cart.cardnum.errors.maxlength"><div>CardNumber should be 19 characters maximum length.</div></div>
                    </div>
                  </div>
                  </div>
                  <div class="form-group row p-2">
                    <label for="secucode" class="col-sm-2 col-form-label col-form-label-lg">Security code</label>
                    <div class="col-sm-10">
                    <input type="text" class="form-control form-control-lg" placeholder="Enter Security code" name="secucode" formControlName="secucode">
                    <div *ngIf="cart.secucode.errors && isValidFormSubmitted != null && isValidFormSubmitted" [ngClass] = "'error'">
                      <div *ngIf="cart.secucode.errors.required"><div>SecurityCode is Required</div></div>
                      <div *ngIf="cart.secucode.errors.minlength"><div>SecurityCode should be 3 characters length.</div></div>
                    </div>
                    </div>
                  </div>
                  <div class="form-group row p-2">
                    <label for="nameoncard" class="col-sm-2 col-form-label col-form-label-lg">Name on card</label>
                    <div class="col-sm-10">
                    <input type="text" class="form-control form-control-lg" placeholder="Enter Name on card" name="nameoncard" formControlName="nameoncard">
                    <div *ngIf="cart.nameoncard.errors && isValidFormSubmitted != null && isValidFormSubmitted" [ngClass] = "'error'">
                      <div *ngIf="cart.nameoncard.errors.required"><div>Name on card is Required</div></div>
                      <div *ngIf="cart.nameoncard.errors.minlength"><div>Name must be 10 characters length.</div></div>
                    </div>
                    </div>
                  </div>
              </div>
            </div>
        <!-- 3 -->
          <div class="form-row text-center">
            <div class="col-lg-12">
              <button type="submit" class="btn btn-warning btn-lg">BUY NOW</button>
             </div>
          </div>
        </form>
      </div>

     <div class="col-lg-12 mb-5">
        <pre><code>{{cartpaymentForm.value | json}}</code></pre>
        <pre><code>{{cartpaymentForm.valid | json}}</code></pre>
    </div>
    <div class="col-lg-12">
    <div class="row" *ngIf="isValidFormSubmitted && cartpaymentForm.valid">
        <table class="table table-striped table-light">
          <thead>
            <tr>
              <th scope="col">Name</th>
              <th scope="col">Email</th>
              <th scope="col">Phone</th>
              <th scope="col">Address</th>
              <th scope="col">Postcode</th>
              <th scope="col">Country</th>
              <th scope="col">CardType</th>
              <th scope="col">Card Number</th>
              <th scope="col">Security Code</th>
              <th scope="col">Name on Card</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{cartPay.flname}}</td>
              <td>{{cartPay.email}}</td>
              <td>{{cartPay.phone}}</td>
              <td>{{cartPay.addresses.address}}</td>
              <td>{{cartPay.addresses.postcode}}</td>
              <td>{{cartPay.addresses.country}}</td>
              <td>{{cartPay.cardType}}</td>
              <td>{{cartPay.cardnum}}</td>
              <td>{{cartPay.secucode}}</td>
              <td>{{cartPay.nameoncard}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
